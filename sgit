#!/bin/bash
#GIT
push()
{
	echo "@Verificando se existem alterações não recolhidas..@";
	pull;

	if [ $? -eq 0 ]; then

		echo "@Nome do novo commit a ser feito:@";
		read -e nome;

		git add --all;
		git commit -m "$nome";
		git push origin master;
	
	else
	
		echo "@Ocorreu um erro (possivelmente um conflito).@";
	
	fi
}
pull()
{ git pull origin master; }
log()
{
	git log --pretty=format:"%C(bold magenta)%ad %C(red)%d|| %C(white)%s %C(red)|| %C(blue)[%cn]" --decorate --date=relative;
}
new()
{
	if [ "$1" == "" ]; then
	
		echo "@Introduza um "git link" correto.@"
		
	else
	
		git init;
		git remote add origin $1;
		echo "O início do desastre" > README.md;
		git add --all;
		git commit -m "O início do desastre";
		git push -u origin master;
		
	fi
}
help()
{
	echo "@@ DESCRIÇÃO DOS ALIAS E FUNÇÕES \"CLANDESTINAS\" DO GIT @@";
	echo "sgit log		» mostra todos os commits"
	echo "sgit push		» faz add, commit e push";
	echo "sgit pull		» faz pull";
	echo "sgit current		» volta para o commit atual";
	echo "sgit throwback		» volta atrás n commits";
	echo "@@ BOA SORTE! @@";
}
throwback()
{
	git checkout HEAD -f >/dev/null;
	if [ $? -ne 0 ]; then
	
		echo "@Ocorreu um erro (possivelmente um conflito).@";
		
	fi
	
	if [ "$1" == "" ] || [ "$1" -le 1 ]; then
	
		git revert --no-commit HEAD~1..HEAD;
		echo "@As mudanças foram revertidas para 1 commit atrás do commit mais atualizado.@";
		
	else
	
		git revert --no-commit HEAD~$1..HEAD;
		echo "@As mudanças foram revertidas para $1 commits atrás do commit mais atualizado.@";
		
	fi
}
status()
{ git status; }
current()
{ 
	git checkout HEAD -f >/dev/null; 
	if [ $? -eq 0 ]; then
	
		echo "@Está tudo no mais atualizado possível.@";
		
	else
	
		echo "@Ocorreu um erro (possivelmente um conflito).@";
		
	fi
}



case $1 in

	push) push
	;;

	pull) pull
	;;

	log) log
	;;
	
	new) new $2
	;;
	
	help) help
	;;	

	throwback) throwback $2
	;;

	current) current
	;;	

	status) status
	;;

	*) echo "@Opção não existente.@"
	;;

esac

